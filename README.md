# avito-libre

Приложение для парсинга сайта авито с поддержкой бота Telegram.

## Технические требования

```
Mozilla Firefox 103.0.1 (64-bit)
python >= 3.10
Redis >= 6.0.16
```

## Особенности

1. Для логирования был использовал встроенный модуль logging, для каждого модуля приложения, имеется свой файл с логами, все логи, при этом, отображаются в консоли.
2. Для тестов был использовал встроенный модуль unittest, для некоторых сущностей, таких как обработчик скриптов js или обработчик даты и времени, были написаны соответствующие тесты.  
3. Для очередей был использован RQ, парсинг через selenium - достаточно ресурсоемкая задача, поэтому парсинг каждого объявления, идёт в очередь.  
4. Для планировщика был использован rq-scheduler, так как объявления постоянно добавляются и удаляются, необходимо их проверять с некой периодичностью, поэтому, и был реализован планировщик задач.
5. В качестве ORM была использована SQLAlchemy с базой данных SQLite, имеется поддержка и других реляционных баз данных.
6. Для миграций была использована библиотека Alembic.
7. Сохранение данных идёт в CSV, JSON, XML и XLSX форматах с большой скоростью, благодаря библиотеке pandas.



## Установка и запуск 

1. Установка зависимостей:
```
pip install requirements.txt
```
2. Миграции:

```
alembic revision --autogenerate -m 'Текст миграции'

alembic upgrade head
```

3. Запуск приложения:

```
python main.py
```

4. Запуск воркера:

```
rq worker --with-scheduler
```

5. Запуск планировщика:
```
rqscheduler
```
6. тесты:
```
python -m unittest discover tests
```


